<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="sellerMapper">

	<resultMap type="com.bg.jtown.security.JtownUser" id="jtown-seller-map">
		<result column="pn" property="pn"/>
		<result column="shop_name" property="shopName"/>
		<result column="shop_url" property="shopUrl"/>
		<result column="notice" property="notice"/>
		<result column="love_count" property="loveCount"/>
		<result column="view_count" property="viewCount"/>
	</resultMap>

	<select id="selectSellerInformation" parameterType="java.lang.Integer" resultMap="jtown-seller-map">
		SELECT
			pn, shop_name, shop_url, notice, love_count, view_count
		FROM
			user_seller
		WHERE
			pn = #{properNumber}
	</select>
	
	<select id="selectSellerImage" parameterType="java.lang.Integer" resultType="java.lang.String">
		SELECT
			usin.save_name
		FROM
			user_seller_image_name usin
		WHERE
			usin.seller_pn = #{properNumber}
	</select>
	
	<insert id="insertSellerImage" parameterType="com.bg.jtown.util.FileVO">
		INSERT INTO
			user_seller_image
			(	seller_pn, image_pn, image_order	)
		VALUES
			(	#{ownerPn}, #{imagePn}, 1	)
	</insert>
	
	<update id="updateSellerImage" parameterType="com.bg.jtown.util.FileVO">
		UPDATE 
			user_seller_image
		SET
			image_pn = #{imagePn} 
		WHERE
			seller_pn = #{ownerPn}
		AND
			image_order = 1
	</update>
	
	<update id="updateSellerNotice" parameterType="com.bg.jtown.security.JtownUser">
		UPDATE
			user_seller
		SET
			notice = #{notice}
		WHERE
			pn = #{pn}
	</update>
	
</mapper>