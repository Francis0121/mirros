$(function(){$("#jt-mypage").bind("mouseover mouseout",function(a){jtown.toggleMouse($("#jt-mypage-wrap"),a.type)});$("#jt-help").bind("mouseover mouseout",function(a){jtown.toggleMouse($("#jt-help-wrap"),a.type)});jtown.comment.home();jtown.home.masonry.start();jtown.home.naturalLanguage();jtown.expand.loadExpandShop();jtown.comment.syncComment();jtown.expand.gotoPage();$("#jt-login-smartPopup").bind("click",function(){jtown.login.showLoginForm()});$("#resendConfirmMail").bind("click",function(){jtown.login.resendEmailAddress()});$("#jt-findUserPassword-btn").bind("click",function(){$("#loading-popup").fadeIn();var a=document.forms.jtownUser;a.submit()});$("#jt-findSellerPassword-btn").bind("click",function(){$("#loading-popup").fadeIn();var a=document.forms.sellerUser;a.submit()});$("#jt-emailAddress-user-btn").bind("click",function(){$("#loading-popup").fadeIn();var a=document.forms.jtownUser;a.submit()});jtown.regExp("email","input[data-type=create]","#confirmEmail",0,50);jtown.regExp("onlyChar","input[data-type=createId]","#confirmEmail",0,20);jtown.regExp("empty","input[data-form=joinPw]","#passwordLength",7,16);jtown.regExp("onlyChar","input[data-form=join]","#nameLength",0,20);jtown.regExp("empty","input[data-form=modify]","#passwordLength",7,16);jtown.login.confirmPassword();jtown.login.joinFormSubmit();jtown.login.changeUserSubmit();jtown.login.disactiveUser();jtown.regExp("onlyChar","input[name=shopName]","#shopNameCheck",0,30);jtown.regExp("email","input[name=email]","#confirmEmail",0,50);jtown.regExp("euckr","input[data-form=partnership]","#nameLength",0,10);jtown.regExp("number","input[name=phoneNumberSt]","#confirmPhoneNumber",0,4);jtown.regExp("number","input[name=phoneNumberNd]","#confirmPhoneNumber",0,4);jtown.regExp("number","input[name=phoneNumberRd]","#confirmPhoneNumber",0,4);jtown.help.questionSync();$("#jt-partnership-btn").bind("click",function(){var a=document.forms.partnership;$("#loading-popup").fadeIn();a.submit()});jtown.board.noticeWrite();$("#page-wrap").css("width",$("#page-wrap>div").width());$("#jt-seller-main-textarea").placeholder();$("#jt-naturalLanguage-search").placeholder();$("#jt-comment-insert").placeholder();$("#username_findPassword").placeholder();$("#username_findSellerPassword").placeholder();$("#j_username_page, #j_password_page").placeholder();$("#partnership_content").placeholder();$("#cQuestion #name").placeholder();$("#cQuestion #email").placeholder();$("#sQuestion #shopPn").placeholder();$("#sQuestion #name").placeholder();$("#sQuestion #email").placeholder();$("#sQuestion #content").placeholder();$("#partnership #shopUrl").placeholder();$("#partnership #email").placeholder();$(".jt-home-expand-shop-expandProducts").jCarouselLite({btnNext:".jt-home-expand-shop-leftArrow",btnPrev:".jt-home-expand-shop-rigthArrow",mouseWheel:true,speed:300,btnGo:[".0",".1",".2",".3",".4",".5",".6",".7",".8",".9",".10",".11",".12",".13",".14",".15",".16",".17",".18",".19",".20",".21",".22",".23",".24",".25",".26",".27",".28",".29"],afterEnd:function(a){setTimeout("jtown.seller.syncProduct()",0)}})});jtown.loading={start:function(){$("#loading-popup").fadeIn()},finish:function(){$("#loading-popup").fadeOut()}};jtown.postJSON=function(a,b,c){jtown.loading.start();$.postJSON(a,b,function(){c();jtown.loading.finish()})};jtown.dialog=function(b){var a='<div style="text-align:center; margin-top: 15px; font-weight: bold; line-height : 16px;">'+b+"</div>";$(a).dialog({resizable:false,width:"300px",hegiht:"200px",modal:true,buttons:{Close:function(){$(this).dialog("close")}}});$(".ui-dialog-titlebar").removeClass("ui-widget-header");$(".ui-dialog-buttonset").css({"float":"none","text-align":"center"})};jtown.confirm=function(c,d,b){var a='<div style="text-align:center; margin-top: 25px; font-weight: bold;">'+c+"</div>";$(a).dialog({resizable:false,width:"300px",hegiht:"200px",modal:true,buttons:{"확인":function(){d();$(this).dialog("close")},"취소":function(){b();$(this).dialog("close")}}});$(".ui-dialog-titlebar").removeClass("ui-widget-header");$(".ui-dialog-buttonset").css({"float":"none","text-align":"center"})};jtown.toggleMouse=function(a,b){if(b=="mouseover"){a.show()}else{if(b=="mouseout"){a.hide()}}};jtown.regExp=function(d,b,e,f,c){if(nullValueCheck(d)){return}var a=null;if(d=="email"){a=/^[-A-Za-z0-9_]+[-A-Za-z0-9_.]*[@]{1}[-A-Za-z0-9_]+[-A-Za-z0-9_.]*[.]{1}[A-Za-z]{2,5}$/}else{if(d=="onlyChar"){a=/^[0-9A-Za-z가-힣]*$/}else{if(d=="empty"){a=/^.*$/}else{if(d=="euckr"){a=/^[가-힣]*$/}else{if(d=="number"){a=/^[0-9]*$/}}}}}$(b).keyup(function(){var h=$(this).val(),g=$(this).val().length;if(a.test(h)&&(g>f&&g<=c)){$(e).children("span").removeClass("jt-form-invalid").addClass("jt-form-valid")}else{$(e).children("span").removeClass("jt-form-valid").addClass("jt-form-invalid")}}).focus(function(){var h=$(this).val(),g=$(this).val().length;if(a.test(h)&&(g>f&&g<=c)){$(e).children("span").removeClass("jt-form-invalid").addClass("jt-form-valid")}else{$(e).children("span").removeClass("jt-form-valid").addClass("jt-form-invalid")}$(e).show()}).blur(function(){$(e).hide()})};if(typeof jtown.home=="undefined"){jtown.home={}}jtown.home.masonry={object:{container:$("#jt-home-container")},start:function(){var a=this.object.container;if(nullValueCheck(a.html())){return}a.imagesLoaded(function(){a.masonry({itemSelector:".jt-home-shop",columnWidth:330,transitionDuration:0})});this.pagination();this.resize();this.scrollTop();$(window).scroll(this.move);$(window).resize(this.resize)},pagination:function(){var a=this.object.container;a.scrollPagination({contentPage:contextPath+"ajax/homePagination.jt",contentData:{categoryPn:a.attr("data-cpn"),sectionPn:a.attr("data-spn")},scrollTarget:$(window),successCallback:function(d){if($.browser.msie&&$.browser.version=="7.0"){var b=$(jtown.home.html(d));a.append(b).masonry("appended",b);a.imagesLoaded(function(){a.masonry("reload")})}else{var c=jtown.home.html(d);a.append(c).masonry("appended",c);a.imagesLoaded(function(){a.masonry()})}setTimeout("jtown.expand.loadExpandShop()",0);setTimeout("jtown.comment.home()",0)},maxPage:a.attr("data-maxPage")})},resize:function(){var b=Number(window.document.body.clientWidth),a=Math.floor(b/330);if(a<3){a=3}$("#jt-home-container").css({width:(a*330),margin:"auto"})},scrollTop:function(){$("#jt-scroll-top").bind("click",function(){$("html, body").animate({scrollTop:0},"slow")})},move:function(){var c=$(".jt-header-title"),b=$(".jt-footer"),g={},f=b.attr("data-isEmail"),e=($.browser.msie&&$.browser.version=="7.0")||($.browser.msie&&$.browser.version=="8.0"),d=document.documentElement,a=document.body,h=document.all?(!d.scrollTop?a.scrollTop:d.scrollTop):(window.pageYOffset?window.pageYOffset:window.scrollY);if(e){g=f?{topHeight:"80px",downHeight:"35px"}:{topHeight:"50px",downHeight:"5px"}}else{g=f?{topHeight:"76px",downHeight:"31px"}:{topHeight:"46px",downHeight:"1px"}}if(h==0){b.slideUp("fast");c.slideDown("fast");setTimeout('$(".jt-header-nav-interestCategory").css( { top : "'+g.topHeight+'" })',0)}else{b.slideDown("fast");c.slideUp("fast",function(){$(".jt-header-nav-interestCategory").css({top:g.downHeight})})}}};jtown.home.clickProduct=function(b,a){ga("send","event","product","click",a);jtown.home.goHome(b)};jtown.home.clickShop=function(a){$.postJSON(contextPath+"ajax/clickView.jt",{sellerPn:a},function(){})};jtown.home.goHome=function(a){$.postJSON(contextPath+"ajax/goHome.jt",{sellerPn:a},function(){})};jtown.home.clickLove=function(a){$.postJSON(contextPath+"ajax/clickLove.jt",{sellerPn:a},function(g){var e=g.sellerPn,d=g.crudType,f=g.message,c=$("#jt-heart-click-"+e),b=$("#jt-heart-expand-click-"+e);if(!nullValueCheck(f)){f=="1"?jtown.login.showLoginForm():jtown.dialog("판매자는 불가능합니다");return}if(d=="insert"){c.addClass("jt-heart-animation");b.addClass("jt-heart-animation")}else{if(d=="delete"){c.removeClass("jt-heart-animation");b.removeClass("jt-heart-animation")}}})};jtown.home.html=function(z){var q=z.jtownUsers,h=z.images,A=z.newComments,x=$.browser,m=x.msie&&x.version=="7.0",r=[],l="";for(var t=0,u=q.length;t<u;t++){var b=q[t],f=b.pn,k=h[f],d=A[f],c="",o="",e=(m||(x.msie&&x.version=="8.0"))?'<div class="jt-home-shop-image-footer"></div>':"",p=!(nullValueCheck(b.loveHotCount)||b.loveHotCount==0)?'<span class="jt-home-shop-love-hot" title="최근 뜨는 미니샵">HOT</span>':"",n=!nullValueCheck(b.customerPn)?"jt-home-shop-love-click":"",w=!nullValueCheck(b.customerPn)?"jt-home-shop-love-text-click":"";if(k.length==0){c='<img alt="Blank" src="'+contextPath+'resources/images/jt-introduce-home-blank.png" title="'+htmlChars(b.name)+'"/>	'}else{for(var s=0,v=k.length;s<v;s++){var g=k[s],y=contextPath+"photo/thumbnail/"+g.saveName+"represent."+g.type;if(g.category=="0"){y=contextPath+"resources/uploadImage/"+g.saveName}c+='<img alt="" src="'+y+'" title="'+htmlChars(b.name)+'"/>	'}}for(var s=0,v=d.length;s<v;s++){var a=d[s];o+='<div class="jt-home-shop-comments" data-isSplit="'+a.isSplit+'" data-copn="'+a.commentPn+'">'+htmlChars(a.splitHome);o+="</div>"}l+='	<div class="jt-home-shop" id="jt-home-shop-'+f+'"  data-spn="'+f+'">';l+="		<header>";l+='			<a href="'+b.shopUrl+'" target="_blank" onclick="jtown.home.goHome(\''+f+"')\">"+htmlChars(b.name)+"</a>";l+="		</header>";l+='		<div class="jt-home-shop-content">';l+='			<ul class="jt-home-shop-content-image">';l+="				<li>";l+="					"+c;l+='					<div class="jt-home-shop-new-event">';l+='						<div id="new-product-'+f+'" class="jt-home-shop-new-event-div" style="'+((b.newProduct>0)?"display: block;":"display:none;")+'">';l+=' 							<span class="jt-home-shop-product-new-image">New arrive</span>';l+="						</div>";l+='						<div id="new-'+f+'" class="jt-home-shop-new-event-div" style="'+(b.newBanner?"display: block;":"display:none;")+'">';l+=' 							<span class="jt-home-shop-event-new-image">New event</span>';l+="						</div>";l+="					</div>";l+="				</li>";l+="			</ul>";l+="		</div>";l+='		<div class="jt-home-notice">';l+='			<span class="jt-home-shop-footer-firstQuotationMark">"</span>';l+='			<pre class="jt-home-shop-footer-text">'+htmlChars(b.notice)+"</pre>";l+='			<span class="jt-home-shop-footer-lastQuotationMark">"</span>';l+="		</div>";l+='		<ul class="jt-home-shop-content-fn">';l+="			<li>";l+='				<span class="jt-home-shop-view" title="최근 일주일간 방문수">VIEW</span>&nbsp;<span id="view-'+f+'">'+(nullValueCheck(b.viewCount)?0:b.viewCount)+"</span>";l+="			</li>";l+="			<li>";l+='				<span class="jt-home-shop-comment">COMMENT</span>&nbsp;<span id="comment-'+f+'">'+(nullValueCheck(b.commentCount)?0:b.commentCount)+"</span>";l+="			</li>";l+="			<li>";l+='			<div class="jt-heart-click-wrap">';l+='				<div class="jt-heart-click-background" id="jt-heart-click-'+f+'">';l+='					<img alt="heart-background" src="'+contextPath+'resources/images/heart-background.png">';l+="				</div>";l+='				<div class="jt-heart-click">';l+='				<a href="#none" onclick="jtown.home.clickLove(\''+f+'\');"id="love-image-'+f+'" class="jt-home-shop-love '+n+'">♥</a>';l+="				</div>";l+="			</div>";l+='			<div class="jt-home-shop-content-love-text-wrap">';l+='				<span id="love-'+f+'" class="'+w+'">'+(nullValueCheck(b.loveCount)?0:b.loveCount)+"</span>";l+="				"+p;l+="			</div>";l+="			</li>";l+="		</ul>";if(d.length>0){l+='		<div class="jt-home-shop-comments-wrap">';l+='			<div class="jt-home-shop-comments-bar"><div></div></div>';l+="			"+o;l+="		</div>"}l+="		"+e;l+="	</div>";if(!m){r[t]=$(l).get(0);l=""}}return !m?r:l};jtown.home.naturalLanguage=function(){$.widget("custom.catcomplete",$.ui.autocomplete,{_renderMenu:function(c,b){var d=this,a="";$.each(b,function(e,f){if(f.category!=a){c.append('<li class="ui-autocomplete-category"><span class="ui-autocomplete-category-span">'+f.category+"</span></li>");a=f.category}d._renderItem=function(g,h){return $("<li>").append('<a class="ui-catcomplete-menu-item">'+h.label+"</a>").appendTo(g)};d._renderItemData(c,f)})}});$("#jt-naturalLanguage-search").catcomplete({source:function(d,a){var b=contextPath+"ajax/natural/autocomplete.jt",c={searchName:d.term};$.postJSON(b,c,function(g){var f=g.jtownUsers,e=g.interests,h=[];for(var j=0,k=f.length;j<k;j++){var m=f[j];h[j]={label:m.name,value:m.name,pn:m.pn,category:"SHOP"}}for(var j=0,k=e.length,n=f.length;j<k;j++){var l=e[j];h[j+n]={label:l.name,value:l.name,categoryPn:l.categoryPn,spn:l.sectionPn,category:"CATEGORY"}}a(h)})},minLength:1,select:function(b,c){var a=c.item;if(a.category=="SHOP"){location.href=contextPath+"mir/"+a.pn}else{if(a.category=="CATEGORY"){location.href=contextPath+"cpn/"+a.categoryPn+"/spn/"+a.spn}}},focus:function(a,b){$(".ui-state-focus").removeClass("ui-corner-all").removeClass("ui-state-focus")},open:function(){$(".ui-autocomplete").removeClass("ui-widget-content").addClass("ui-catcomplete-content");$(this).addClass("ui-catcomplete-input");$(".ui-menu").css({padding:0})},close:function(){$(this).removeClass("ui-catcomplete-input");$("#jt-naturalLanguage-search").val("")}})};function htmlChars(a){if(nullValueCheck(a)){return""}var b=((a.replace('"',"&amp;")).replace('"',"&quot;")).replace("'","&#39;");return(b.replace("<","&lt;")).replace(">","&gt;")}function nullValueCheck(a){if(a==null||a==undefined||a==""||a=="undefined"){return true}return false}function split(a){return a.split(/,\s*/)}var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(d){for(var a=0;a<d.length;a++){var b=d[a].string;var c=d[a].prop;this.versionSearchString=d[a].versionSearch||d[a].identity;if(b){if(b.indexOf(d[a].subString)!=-1){return d[a].identity}}else{if(c){return d[a].identity}}}},searchVersion:function(b){var a=b.indexOf(this.versionSearchString);if(a==-1){return}return parseFloat(b.substring(a+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};function checkKeycode(b){var a=0;if(window.event){a=window.event.keyCode}else{if(b){a=b.which}}if(a==116){a=2;location.href=realPath;return false}else{if(b.ctrlKey&&(a==78||a==82)){location.href=realPath;return false}}}if(typeof jtown.login=="undefined"){jtown.login={}}function onPopupLoginSubmit(){jtown.login.submit("jt-popup-login-form")}function onPageLoginSubmit(){jtown.login.submit("jt-page-login-form")}jtown.login.submit=function(b){var a=$("#"+b);jQuery.ajax({type:"POST",url:contextPath+"j_spring_security_check",data:a.serialize(),dataType:"text",success:function(c){jtown.login.control(c,b)}})};jtown.login.control=function(data,name){var map=eval("("+data+")"),result=map.result,url=map.url;if(result=="success"){location.href=contextPath+url}else{if(result=="error"){location.href=contextPath+"login/?isFinish=0"}}return};jtown.login.showLoginForm=function(){var c=$("#jt-login-form-wrap"),d=c.find("form[name=jt-popup-login-form]"),a=c.find("input[name=j_username]"),b=c.find("input[name=j_password]");d.attr("id","jt-popup-login-form");a.attr("id","j_username");b.attr("id","j_password");$.smartPop.open({width:430,height:350,html:c.html(),effect:null});d.attr("id","");a.attr("id","");b.attr("id","");setTimeout("$(function() { $('#j_username, #j_password').placeholder(); });",0)};jtown.login.resendEmailAddress=function(){$("#resendConfirmMail").unbind("click");jtown.postJSON(contextPath+"ajax/resendConfirmEmail.jt",{},function(){jtown.dialog("E-mail을 재전송 하였습니다.");$("#resendConfirmMail").bind("click",function(){jtown.login.resendEmailAddress()})})};jtown.login.joinFormSubmit=function(){$(".jt-join-submit").bind("click",function(){$("#loading-popup").fadeIn();var a=document.forms.jtownUser;a.submit()})};jtown.login.changeUserSubmit=function(){$(".jt-change-user-btn").bind("click",function(){$("#loading-popup").fadeIn();var a=document.forms.jtownUser;a.action=contextPath+"login/modify.jt";a.submit()})};jtown.login.disactiveUser=function(){$(".jt-disactive-user-btn").toggle(function(){$(".jt-disactive-content").show();setTimeout("$('html, body').animate({scrollTop: $(document).height()}, 'slow')",0)},function(){$(".jt-disactive-content").slideUp()});$(".jt-disactive-btn").bind("click",function(){jtown.confirm("계정을 정말로 삭제하시겠습니까?",function(){var a=document.forms.disactiveUser;a.submit()},function(){})});$(".jt-disactive-cancle-btn").bind("click",function(){jtown.confirm("계정 삭제를 취소하시겠습니까?",function(){var a=document.forms.disactiveUser;a.submit()},function(){})})};jtown.login.confirmPassword=function(){$("input[name=confirmPassword]").keyup(function(){var b=$(this).val(),a=nullValueCheck($("input[data-form=joinPw]").val())?$("input[data-form=modify]").val():$("input[data-form=joinPw]").val();if(b==a){$("#confirmPW>span").removeClass("jt-form-invalid").addClass("jt-form-valid")}else{$("#confirmPW>span").removeClass("jt-form-valid").addClass("jt-form-invalid")}}).focus(function(){var b=$(this).val(),a=nullValueCheck($("input[data-form=joinPw]").val())?$("input[data-form=modify]").val():$("input[data-form=joinPw]").val();if(b==a){$("#confirmPW>span").removeClass("jt-form-invalid").addClass("jt-form-valid")}else{$("#confirmPW>span").removeClass("jt-form-valid").addClass("jt-form-invalid")}$("#confirmPW").show()}).blur(function(){$("#confirmPW").hide()})};if(typeof jtown.admin=="undefined"){jtown.admin={}}var oEditors=[];$(function(){$("#jt-search-partnership-btn").bind("click",function(){var b=document.forms.partnershipFilter;b.page.value=1;b.submit()});var a=$("#board #content");if(a.html()!=undefined){nhn.husky.EZCreator.createInIFrame({oAppRef:oEditors,elPlaceHolder:"content",sSkinURI:contextPath+"resources/se2/SmartEditor2Skin.html",fCreator:"createSEditor2"})}$("#jt-admin-notice-delete").bind("click",function(){jtown.confirm("게시글을 삭제하시겠습니까?",function(){var b=document.forms.board;b._method.value="delete";b.submit()},function(){})});jtown.admin.sellerCreate();jtown.admin.sellerSync();$(".jt-reset-password").unbind("click").bind("click",function(){var c={username:$(this).attr("data-username")},b=contextPath+"admin/ajax/resetPassword.jt";$.postJSON(b,c,function(){jtown.dialog("재설정 되었습니다.")})});$(".jt-partnership-table-information").unbind("click").bind("click",function(){var b=$(this).parents(".jt-partnership-info").attr("data-pspn");$("#partnership-content-"+b).toggle()});$(".jt-admin-customer-enable").unbind("change").bind("change",function(){var c=$(this).parents(".jt-admin-customer-table-tr"),d={pn:c.attr("data-cpn"),enabled:($(this).val()==1?true:false)},b=contextPath+"admin/ajax/changeEnabled.jt";$.postJSON(b,d,function(){})});jtown.admin.changeText("jt-partnership-name",function(f,b){var g=f.parents(b.parentSelector),e=f.parents(b.selector),c=contextPath+"admin/ajax/updatePartnershipName.jt",d={pn:g.attr("data-pspn"),name:f.val()};$.postJSON(c,d,function(h){if(h.key==1){alert(h.value);f.focus()}else{e.html(htmlChars(h.value))}})},function(){});jtown.admin.changeText("jt-partnership-email",function(f,b){var g=f.parents(b.parentSelector),e=f.parents(b.selector),c=contextPath+"admin/ajax/updatePartnershipEmail.jt",d={pn:g.attr("data-pspn"),email:f.val()};$.postJSON(c,d,function(h){if(h.key==1){alert(h.value);f.focus()}else{e.html(htmlChars(h.value))}})},function(){});jtown.admin.changeText("jt-partnership-phoneNumber",function(f,b){var g=f.parents(b.parentSelector),e=f.parents(b.selector),c=contextPath+"admin/ajax/updatePartnershipPhoneNumber.jt",d={pn:g.attr("data-pspn"),phoneNumber:f.val()};$.postJSON(c,d,function(h){if(h.key==1){alert(h.value);f.focus()}else{e.html(htmlChars(h.value))}})},function(){});jtown.admin.changeSelect("jt-partnership-category",function(c,b){success=function(){var f=c.parents(b.parentSelector),d=contextPath+"admin/ajax/updatePartnershipCategory.jt",e={pn:f.attr("data-pspn"),categoryPn:c.val()};$.postJSON(d,e,function(g){var h=g.jtownUser.pn;if(h!=null&&h!=0){f.find(".jt-partnership-interest").html("")}})};cancle=function(){var f=c.parents(b.parentSelector),d=contextPath+"admin/ajax/selectPartnershipCategory.jt",e={pn:f.attr("data-pspn")};$.postJSON(d,e,function(g){c.val(g)})};jtown.confirm("사업아이템을 바꾸시겠습니까?",success,cancle)});jtown.admin.changeSelect("jt-partnership-adminPn",function(e,b){var f=e.parents(b.parentSelector),c=contextPath+"admin/ajax/changePartnershipJson.jt",d={key:f.attr("data-pspn"),value:e.val()};$.postJSON(c,d,function(g){})});jtown.admin.changeSelect("jt-partnership-process",function(e,b){var f=e.parents(b.parentSelector),c=contextPath+"admin/ajax/updatePartnership.jt",d={pn:f.attr("data-pspn"),process:e.val()};$.postJSON(c,d,function(g){})});jtown.admin.changeSelect("jt-partnership-deposit",function(e,b){var f=e.parents(b.parentSelector),c=contextPath+"admin/ajax/updatePartnership.jt",d={pn:f.attr("data-pspn"),deposit:e.val()};$.postJSON(c,d,function(g){})});jtown.admin.changeTextarea("jt-partnership-note",function(f,b){var g=f.parents(b.parentSelector),e=f.parents(b.selector),c=contextPath+"admin/ajax/updatePartnershipNote.jt",d={pn:g.attr("data-pspn"),note:f.val()};$.postJSON(c,d,function(h){if(h.key==1){alert(h.value);f.focus()}else{e.html("<pre>"+htmlChars(h.value)+"</pre>")}})})});jtown.admin.sellerCreate=function(){$(".jt-seller-create-btn").unbind("click").bind("click",function(){var d=$(this),c=d.parents(".jt-partnership-info"),e=c.attr("data-pspn");var a=contextPath+"admin/ajax/createSeller.jt";var b={pn:e,shopUrl:d.attr("data-shopUrl"),name:d.attr("data-name")};$.postJSON(a,b,function(f){c.attr("data-spn",f.pn);c.find(".jt-seller-create").html('<a href="'+contextPath+"seller/"+f.pn+'">'+f.username+"</a>").removeClass("jt-seller-create").addClass("jt-partnership-username");c.find(".jt-seller-shopPn").text(f.sixShopPn).removeClass("jt-seller-shopPn").addClass("jt-partnership-shopPn");c.find(".jt-seller-shopUrl").addClass("jt-partnership-shopUrl").removeClass("jt-seller-shopUrl");c.find(".jt-seller-name").addClass("jt-partnership-sellerName").removeClass("jt-seller-name");c.find(".jt-seller-enabled").addClass("jt-partnership-enabled").removeClass("jt-seller-enabled");c.find(".jt-partnership-enabled-select").css("display","block");c.find(".jt-seller-interest").text("").addClass("jt-partnership-interest").removeClass("jt-seller-interest");c.find(".jt-seller-date").text("").addClass("jt-partnership-contract-date").removeClass("jt-seller-date");var g='<button type="button" class="jt-admin-contract jt-btn-white-small"><span class="btnText">조회</span></button>';c.find(".jt-seller-register").html(g).addClass("jt-partnership-contract-register").removeClass("jt-seller-register");setTimeout("jtown.admin.sellerSync()",0)})})};jtown.admin.sellerSync=function(){jtown.admin.changeText("jt-partnership-shopUrl",function(e,a){var f=e.parents(a.parentSelector),d=e.parents(a.selector),b=contextPath+"admin/ajax/changeSellerShopUrl.jt",c={pn:f.attr("data-spn"),shopUrl:e.val()};$.postJSON(b,c,function(g){if(g.key==1){alert(g.value);e.focus()}else{d.html(htmlChars(g.value))}})},function(){});jtown.admin.changeText("jt-partnership-sellerName",function(e,a){var f=e.parents(a.parentSelector),d=e.parents(a.selector),b=contextPath+"admin/ajax/changeSellerName.jt",c={pn:f.attr("data-spn"),name:e.val()};$.postJSON(b,c,function(g){if(g.key==1){alert(g.value);e.focus()}else{d.html(htmlChars(g.value))}})},function(){});jtown.admin.changeText("jt-partnership-interest",function(e,a){var g=e.parents(a.parentSelector),d=e.parents(a.selector),b=contextPath+"admin/ajax/changeInterest.jt",f=g.find(".jt-partnership-category-select"),c={sellerPn:g.attr("data-spn"),categoryPn:f.val(),interestSectionList:e.val()};$.postJSON(b,c,function(){d.html(htmlChars(e.val()))})},jtown.admin.autoInterestOne);jtown.admin.changeSelect("jt-partnership-enabled",function(d,a){var e=d.parents(a.parentSelector),b=contextPath+"admin/ajax/changeEnabled.jt",c={pn:e.attr("data-spn"),enabled:(d.val()==1?true:false)};$.postJSON(b,c,function(f){})});$(".jt-admin-contract").unbind("click").bind("click",function(){var d=$(this).parents(".jt-partnership-info"),c=d.attr("data-spn");var a=contextPath+"admin/contract/?sellerPn="+c;var b="width=800, height=300, resizable=no, scrollbars=no, status=no";window.open(a,"",b)})};jtown.admin.changeText=function(c,e,d){var b=$.browser.chrome?"keydown":"keypress";var a={selector:"."+c,input:c+"-input",inputSelector:"#"+c+"-input",parentSelector:".jt-partnership-info"};$(a.selector).unbind("mouseup").bind("mouseup",function(){var g=$(this),h=g.text(),f='<input class="" id="'+a.input+'" type="text" value="'+h+'" style="width: '+(Number(g.width())-14)+'px;"/>';g.html(f);setTimeout(d,0);$(a.inputSelector).focus();$(a.inputSelector).bind("focusout",function(){e($(this),a)});$(a.inputSelector).bind(b,function(i){if(i.keyCode==13){e($(this),a)}else{if(i.keyCode==27){g.html(htmlChars(h))}}})})};jtown.admin.changeSelect=function(b,c){var a={selector:"."+b,input:b+"-select",inputSelector:"."+b+"-select",parentSelector:".jt-partnership-info"};$(a.inputSelector).unbind("change").bind("change",function(){c($(this),a)})};jtown.admin.changeTextarea=function(c,e,d){var b=$.browser.chrome?"keydown":"keypress";var a={selector:"."+c,input:c+"-input",inputSelector:"#"+c+"-input",parentSelector:".jt-partnership-info"};$(a.selector).unbind("mouseup").bind("mouseup",function(){var g=$(this),h=g.text(),f='<textarea class="" id="'+a.input+'" type="text" style="width: '+(Number(g.width())-14)+"px; height: "+(Number(g.height()))+'">'+h+"</textarea>";g.html(f);setTimeout(d,0);$(a.inputSelector).focus();$(a.inputSelector).bind("focusout",function(){e($(this),a)});$(a.inputSelector).bind(b,function(i){if(i.keyCode==13){e($(this),a)}else{if(i.keyCode==27){g.html("<pre>"+htmlChars(h)+"</pre>")}}})})};jtown.admin.autoInterestOne=function(){var b=$.browser.chrome?"keydown":"keypress";var a="";$("#jt-partnership-interest-input").unbind(b).bind(b,function(d){if(d.keyCode===$.ui.keyCode.TAB&&$(this).data("ui-autocomplete").menu.active){d.preventDefault()}if(a==""){var c=$(this).parents(".jt-partnership-info");a=c.find(".jt-partnership-category-select").val()}}).autocomplete({minLength:0,source:function(f,c){var d=contextPath+"admin/ajax/autoInterestSection.jt",e={categoryPn:a,name:f.term};$.postJSON(d,e,function(h){var k=[];for(var j=0,g=h.length;j<g;j++){var l=h[j];k[j]={label:l.name,value:l.name}}c(k)})},focus:function(){return false},select:function(d,e){var c=split(this.value);c.pop();c.push(e.item.value);c.push("");this.value=c.join(",");return false}})};if(typeof jtown.seller=="undefined"){jtown.seller={}}$(function(){jtown.seller.syncPopup();jtown.seller.startIntro();jtown.seller.markIntro();jtown.seller.syncIntro();jtown.seller.syncMainNotice();jtown.seller.syncMainImage();jtown.seller.syncProduct();jtown.seller.syncEvent();jtown.seller.syncExpandNotice();$("#jt-event-second-image").uploadify({formData:{pn:$("#jt-seller-body").attr("data-spn"),category:"event"},buttonText:"사진 업로드",fileTypeDesc:"Image Files",fileTypeExts:"*.gif; *.jpg; *.png",fileSizeLimit:"2MB",multi:false,swf:contextPath+"resources/uploadify/uploadify.swf",uploader:contextPath+"file/upload.jt",itemTemplate:"<div></div>",onUploadStart:function(){jtown.loading.start()},onUploadSuccess:function(file,data,response){jtown.seller.secondEvent(eval("("+data+")"));setTimeout("jtown.loading.finish()")}});$("#jt-event-first-image").uploadify({formData:{pn:$("#jt-seller-body").attr("data-spn"),category:"event"},buttonText:"사진 업로드",fileTypeDesc:"Image Files",fileTypeExts:"*.gif; *.jpg; *.png",fileSizeLimit:"2MB",multi:false,swf:contextPath+"resources/uploadify/uploadify.swf",uploader:contextPath+"file/upload.jt",itemTemplate:"<div></div>",onUploadStart:function(){jtown.loading.start()},onUploadSuccess:function(file,data,response){jtown.seller.firstEvent(eval("("+data+")"));setTimeout("jtown.loading.finish()",0)}});$("#jt-represent-image").uploadify({formData:{pn:$("#jt-seller-body").attr("data-spn"),category:"represent"},buttonText:"사진 업로드",method:"post",fileTypeDesc:"Image Files",fileTypeExts:"*.gif; *.jpg; *.png",fileSizeLimit:"2MB",multi:false,swf:contextPath+"resources/uploadify/uploadify.swf",uploader:contextPath+"file/upload.jt",itemTemplate:"<div></div>",onUploadStart:function(){jtown.loading.start()},onUploadSuccess:function(file,data,response){jtown.seller.mainImage(eval("("+data+")"));setTimeout("jtown.loading.finish()",0)}});$("#jt-product-file").uploadify({formData:{pn:$("body").attr("data-spn"),category:"product"},buttonClass:"uploadify-plus-insert-btn",buttonText:'<img src="'+contextPath+'resources/images/jt-cloth-icon.png" style="float:left; margin:9px 7px 0 10px"/><span style="float:left; ">상품추가</span>',height:"30",width:"90",fileTypeDesc:"Image Files",fileTypeExts:"*.gif; *.jpg; *.png",fileSizeLimit:"2MB",swf:contextPath+"resources/uploadify/uploadify.swf",uploader:contextPath+"file/upload.jt",itemTemplate:"<div></div>",errorMsg:"",onUploadStart:function(){jtown.loading.start()},onUploadSuccess:function(file,data,response){jtown.seller.productImage(eval("("+data+")"))},onQueueComplete:function(){setTimeout("jtown.loading.finish()",1000);setTimeout("location.reload();",1000)}});$("#jt-product-finish").unbind("click").bind("click",function(){window.opener.document.location.reload();window.close()});$("#jt-tag-update-show-btn").toggle(function(){var url=contextPath+"ajax/seller/selectInterestes.jt",json={};$.postJSON(url,json,function(interestes){var html="";for(var i=0,iLen=interestes.length;i<iLen;i++){var interest=interestes[i];var checked=nullValueCheck(interest.sellerPn)?"":'checked="checked"';html+='<li><input type="checkbox" '+checked+' name="jt-tag-check" class="jt-tag-check" value="'+interest.sectionPn+'"/><label for="jt-tag-check">'+htmlChars(interest.name)+"</label></li>"}$("#jt-tag-checkBox-section>ul").html(html);$("#jt-tag-checkBox").show();setTimeout("jtown.seller.changeTag()",0);setTimeout("jtown.seller.changeTagIntro();",0)})},function(){$("#jt-tag-checkBox").hide();setTimeout("jtown.seller.changeTagIntro();",0)})});jtown.seller.changeTag=function(){$(".jt-tag-check").unbind("click").bind("click",function(){var a=$("input:checkbox[name=jt-tag-check]:checked");if(a.length>5){$(this).each(function(){this.checked=false});$("#jt-checkBox-header-text").css("color","#ff3600")}else{$("#jt-checkBox-header-text").css("color","#808080")}});$("#jt-tag-update-btn").unbind("click").bind("click",function(){var e=$("input:checkbox[name=jt-tag-check]:checked");var a=new Array(e.length);for(var d=0,g=e.length;d<g;d++){var f=e[d];a[d]=f.value}var b=contextPath+"ajax/seller/updateSellerInterestes.jt";var c={spnList:a};$.postJSON(b,c,function(j){$("#jt-seller-tag-content>span").remove();var l="";for(var k=0,h=j.length;k<h;k++){var m=j[k];l+="<span>"+m.name;if((k+1)!=h){l+=", "}l+="</span>"}$("#jt-tag-update-show-btn").before(l);$("#jt-tag-checkBox").hide();setTimeout("jtown.seller.changeTagIntro();",0)})});$("#jt-tag-cancle-btn").unbind("click").bind("click",function(){$("#jt-tag-checkBox").hide();setTimeout("jtown.seller.changeTagIntro();",0)})};jtown.seller.changeTagIntro=function(){var a=Number($("#step2").height())+20;$(".introjs-helperLayer").height(a)};makeIntro=function(){var a=introJs();a.setOptions({steps:[{element:"#step1",intro:'ShopNo : 고객고유번호<br/> Seller : 회사명 <br/>Site : 홈페이지주소<br/><span style="color : #ff431e;">위 정보는 고유정보 임으로 바꾸시려면 <a href="'+contextPath+'help/question" style="text-decoration:underline; color:#ff431e;">고객센터</a>에 문의 해주시기 바랍니다.</span>'},{element:"#step2",intro:'<ol>	<li>쇼핑몰 대표 태그 입니다.</li>	<li><span class="jt-intro-order">1.</span><span class="jt-tag-update-intro">수정</span> 을 클릭합니다.</li>	<li><span class="jt-intro-order">2.</span>자신이 원하는 Tag을 체크합니다.</li>	<li><span class="jt-intro-order">3.</span>수정 버튼을 클릭합니다.</li></ol>'},{element:"#step3",intro:'<ol style="list-style: decimal; margin-left: 15px;">	<li>마우스를 사진 위에 올립니다.</li>	<li>수정 버튼을 클릭합니다.</li>	<li>사진 업로드 버튼을 클릭하여 사진을 업로드 합니다.</li>	<li>수정 버튼을 클릭합니다.</li></ol>'},{element:"#jt-seller-main-footer",intro:'<ol style="list-style: decimal; margin-left: 15px;">	<li>마우스를 내용 위에 올립니다.</li>	<li>수정 버튼을 클릭합니다.</li>	<li>내용을 수정 합니다.</li>	<li>수정 버튼을 클릭합니다.</li></ol>'},{element:"#step5",intro:'<ul>	<li><span class="jt-home-shop-view jt-home-text-explain">VIEW</span> : 최근 일주일간 방문수</li>	<li><span class="jt-home-shop-comment jt-home-text-explain jt-comment-text-explain">COMMENT</span> : 댓글 수</li>	<li><span class="jt-home-shop-love jt-home-text-explain jt-love-text-explain">♥</span> : 하트 클릭 수</li></ul>'},{element:"#jt-home-expand-shop-notice",intro:'<ol style="list-style: decimal; margin-left: 15px;">	<li>마우스를 내용 위에 올립니다.</li>	<li>수정 버튼을 클릭합니다.</li>	<li>내용을 수정 합니다.</li>	<li>수정 버튼을 클릭합니다.</li></ol>'},{element:"#step7",intro:"소비자가 해당 상품을 클릭하면 입력된 상품 URL 로 이동됩니다. 입력되지 않았을 시에는 쇼핑몰 첫 페이지로 이동 됩니다. 입력은 다음 단계에서 간편하게 가능 합니다."},{element:"#step8",intro:"'+' 버튼을 누르시고 당신의 상품을 알려보세요."},{element:"#jt-seller-expand-event-first",intro:'<ol style="list-style: decimal; margin-left: 15px;">	<li>마우스를 사진 위에 올립니다.</li>	<li>수정 버튼을 클릭합니다.</li>	<li>사진 업로드 버튼을 클릭하여 사진을 업로드 합니다.</li>	<li>수정 버튼을 클릭합니다.</li></ol>'},{element:"#jt-seller-expand-event-second",intro:'<ol style="list-style: decimal; margin-left: 15px;">	<li>마우스를 사진 위에 올립니다.</li>	<li>수정 버튼을 클릭합니다.</li>	<li>사진 업로드 버튼을 클릭하여 사진을 업로드 합니다.</li>	<li>수정 버튼을 클릭합니다.</li></ol>'}]});return a};jtown.seller.syncIntro=function(){$(".jt-seller-text-content").unbind("mouseover mouseout").bind("mouseover mouseout",function(a){if(a.type=="mouseover"){$(this).find(".question-mark-wrap").show()}else{if(a.type=="mouseout"){$(this).find(".question-mark-wrap").hide()}}});$(".jt-home-shop-content-fn").unbind("mouseover mouseout").bind("mouseover mouseout",function(a){if(a.type=="mouseover"){$(this).find(".question-mark-wrap").show()}else{if(a.type=="mouseout"){$(this).find(".question-mark-wrap").hide()}}});$(".jt-home-expand-seller-fake").unbind("mouseover mouseout").bind("mouseover mouseout",function(a){if(a.type=="mouseover"){$(this).find(".question-mark-wrap").show()}else{if(a.type=="mouseout"){$(this).find(".question-mark-wrap").hide()}}});$(".jt-home-expand-shop-products").unbind("mouseover mouseout").bind("mouseover mouseout",function(a){if(a.type=="mouseover"){$(this).find(".question-mark-wrap").show()}else{if(a.type=="mouseout"){$(this).find(".question-mark-wrap").hide()}}});$(".jt-seller-tag").unbind("mouseover mouseout").bind("mouseover mouseout",function(a){if(a.type=="mouseover"){$(this).find(".question-mark-wrap").show()}else{if(a.type=="mouseout"){$(this).find(".question-mark-wrap").hide()}}})};jtown.seller.startIntro=function(){$("#showHow").unbind("click").bind("click",function(){makeIntro().start()});$("#showHowPopup").unbind("click").bind("click",function(){makePoupIntro().start()})};jtown.seller.markIntro=function(){$(".question-mark").unbind("click").bind("click",function(){$(".question-mark").addClass("question-mark-hide");var a=$(this).attr("data-step");makeIntro().goToStep(a).start().oncomplete(function(){jtown.seller.markIntro();$(".question-mark").removeClass("question-mark-hide")}).onexit(function(){jtown.seller.markIntro();$(".question-mark").removeClass("question-mark-hide")})})};jtown.seller.syncProduct=function(){$(".jt-home-expand-shop-expandProduct").unbind("mouseover mouseout");$(".jt-home-expand-shop-expandProduct").bind("mouseover mouseout",function(a){if(a.type=="mouseover"){$(this).find(".jt-product-article-object-wrap").show()}else{if(a.type=="mouseout"){$(this).find(".jt-product-article-object-wrap").hide()}}});$("#jt-product-popup").unbind("click").bind("click",function(){var a=contextPath+"seller/products/"+$(this).attr("data-pn");var b="width=610, height=550, toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=no";window.open(a,"",b)})};jtown.seller.syncPopup=function(){$(".jt-product-article-object-img").unbind("mouseover mouseout").bind("mouseover mouseout",function(a){if(a.type=="mouseover"){$(this).children(".jt-seller-expand-product-delete-tool").show();$(this).children(".jt-product-article-object-wrap").show()}else{if(a.type=="mouseout"){$(this).children(".jt-seller-expand-product-delete-tool").hide();$(this).children(".jt-product-article-object-wrap").hide()}}});$(".jt-seller-product-delete").unbind("click");$(".jt-seller-product-delete").bind("click",function(){var a=$(this).parents("li").attr("data-ppn");var b=document.forms.product;b.pn.value=a;b._method.value="delete";b.submit()});$(".jt-product-article-object-img").unbind("click").bind("click",function(){var f=$(this).hasClass("jt-product-active");if(f){$(".jt-product-article-update").hide();$(".jt-product-article-insert").show();$(".jt-product-article-object-img").removeClass("jt-product-active");return}var c=$(this).attr("data-ppn"),b=$(this).attr("data-name"),e=$(this).attr("data-price"),a=$(this).attr("data-url");var d=document.forms.product;d.pn.value=c;d.name.value=nullValueCheck(b)?"":b;d.price.value=nullValueCheck(e)?"":e;d.url.value=nullValueCheck(a)?"":a;$(".jt-product-article-insert").hide();$(".jt-product-article-update").show();$(".jt-product-input-error").addClass("jt-product-input").removeClass("jt-product-input-error");$(".jt-product-error").text("");$(".jt-product-article-object-img").removeClass("jt-product-active");$(this).addClass("jt-product-active")});$(".jt-product-update-cancle").unbind("click").bind("click",function(){$(".jt-product-article-update").hide();$(".jt-product-article-insert").show();$(".jt-product-article-object-img").removeClass("jt-product-active")});$(".jt-product-update-submit").unbind("click").bind("click",function(){var a=document.forms.product;a._method.value="put";a.submit();$(".jt-product-article-update").hide();$(".jt-product-article-insert").show();$(".jt-product-article-object-img").removeClass("jt-product-active")})};jtown.seller.changeExpandTextIntro=function(){var a=Number($("#jt-home-expand-shop-notice").height())+20;$(".introjs-helperLayer").height(a)};jtown.seller.syncExpandNotice=function(){$("#jt-home-expand-shop-notice").unbind("mouseover mouseout").bind("mouseover mouseout",function(a){var b=$("#jt-seller-expand-notice-update-tool").css("display");if(b=="none"){if(a.type=="mouseover"){$("#jt-seller-expand-notice-hover-tool").show();$(this).find(".question-mark-wrap").show()}else{if(a.type=="mouseout"){$("#jt-seller-expand-notice-hover-tool").hide();$(this).find(".question-mark-wrap").hide()}}}});$("#jt-seller-expand-notice-updateShow").unbind("click").bind("click",function(){$("#jt-seller-expand-notice-hover-tool").hide();$("#jt-seller-expand-shop-text").hide();$("#jt-seller-expand-notice-update-tool").show();$("#jt-seller-expand-textarea").show();setTimeout("jtown.seller.changeExpandTextIntro();",0)});$("#jt-seller-expand-notice-update").unbind("click").bind("click",function(){$("#jt-seller-expand-notice-update-tool").hide();var b=contextPath+"ajax/seller/changeLongNotice.jt",a=$("#jt-seller-expand-textarea").val(),c={longNotice:a};$.postJSON(b,c,function(){return jQuery.ajax({success:function(){$("#jt-seller-expand-textarea").hide();$("#jt-seller-expand-shop-text").html(a).show();setTimeout("jtown.seller.changeExpandTextIntro();",0)},error:function(){$("#jt-seller-expand-textarea").hide();$("#jt-seller-expand-shop-text").show();setTimeout("jtown.seller.changeExpandTextIntro();",0);jtown.dialog("오류발생")}})})});$("#jt-seller-expand-notice-cancle").unbind("click").bind("click",function(){$("#jt-seller-expand-notice-update-tool").hide();$("#jt-seller-expand-textarea").hide().val($("#jt-seller-expand-shop-text").html());$("#jt-seller-expand-shop-text").show();setTimeout("jtown.seller.changeExpandTextIntro();",0)})};jtown.seller.changeMainTextIntro=function(){var a=Number($("#jt-seller-main-footer").height())+20;$(".introjs-helperLayer").height(a)};jtown.seller.syncMainNotice=function(){$("#jt-seller-main-footer").unbind("mouseover mouseout").bind("mouseover mouseout",function(a){var b=$("#jt-seller-main-notice-update-tool").css("display");if(b=="none"){if(a.type=="mouseover"){$("#jt-seller-main-notice-hover-tool").show();$(this).find(".question-mark-wrap").show()}else{if(a.type=="mouseout"){$("#jt-seller-main-notice-hover-tool").hide();$(this).find(".question-mark-wrap").hide()}}}});$("#jt-seller-main-notice-updateShow").unbind("click").bind("click",function(){$("#jt-seller-main-notice-hover-tool").hide();$("#jt-seller-main-footer-text").hide();$("#jt-seller-main-notice-update-tool").show();$("#jt-seller-main-textarea").show();setTimeout("jtown.seller.changeMainTextIntro()")});$("#jt-seller-main-notice-update").unbind("click").bind("click",function(){$("#jt-seller-main-notice-update-tool").hide();var a=contextPath+"ajax/seller/changeNotice.jt",c=$("#jt-seller-main-textarea").val(),b={notice:c};$.postJSON(a,b,function(){return jQuery.ajax({success:function(){$("#jt-seller-main-textarea").hide();if(nullValueCheck(c)){$("#jt-seller-main-textarea").hide();$("#jt-seller-main-footer-text").html("쇼핑몰 소개 공간입니다. 쇼핑몰의 특징이나 최근 진행하는 이벤트를 적어보세요.").show().attr("data-isNull","true").addClass("jt-home-shop-footer-text-isNull")}else{$("#jt-seller-main-footer-text").html(c).show().attr("data-isNull","false").removeClass("jt-home-shop-footer-text-isNull")}setTimeout("jtown.seller.changeMainTextIntro()")},error:function(){$("#jt-seller-main-textarea").hide();$("#jt-seller-main-footer-text").show();setTimeout("jtown.seller.changeMainTextIntro()");jtown.dialog("오류발생")}})})});$("#jt-seller-main-notice-cancle").unbind("click").bind("click",function(){var a=$("#jt-seller-main-footer-text").attr("data-isNull"),b=$("#jt-seller-main-footer-text").html();if(a=="true"){b=""}$("#jt-seller-main-notice-update-tool").hide();$("#jt-seller-main-textarea").hide().val(b);$("#jt-seller-main-footer-text").show();setTimeout("jtown.seller.changeMainTextIntro()")})};jtown.seller.syncMainImage=function(){$("#jt-seller-main-image").unbind("mouseover mouseout").bind("mouseover mouseout",function(a){var b=$("#jt-seller-main-image-update-tool").css("display");if(b=="none"){if(a.type=="mouseover"){$("#jt-seller-main-image-hover-tool").show();$(this).find(".question-mark-wrap").show()}else{if(a.type=="mouseout"){$("#jt-seller-main-image-hover-tool").hide();$(this).find(".question-mark-wrap").hide()}}}});$("#jt-seller-main-image-updateShow").unbind("click").bind("click",function(){$("#jt-seller-main-image-hover-tool").hide();$("#jt-seller-main-image-update-tool").show();setTimeout("jtown.seller.changeMainBgHeight()",0)});$("#jt-seller-main-image-update").unbind("click").bind("click",function(){$("#jt-seller-main-image-update-tool").hide();jtown.seller.mainImageUpdate()});$("#jt-seller-main-image-cancle").unbind("click").bind("click",function(){$("#jt-seller-main-image-update-tool").hide();jtown.seller.mainImageCancle();setTimeout("jtown.seller.changeMainBgHeight()",0)})};jtown.seller.changeMainBgHeight=function(){var a=$("#jt-seller-main-image").height();$("#jt-seller-main-image-update-tool").height(a);a=Number(a)+20;$(".introjs-helperLayer").height(a)};jtown.seller.mainImage=function(d){var b=$("#jt-seller-main-image-area").attr("src"),c=contextPath+"photo/thumbnail/"+d.saveName+"represent."+d.type,a=$("#jt-seller-main-image-area").attr("data-oldSrc");$("#jt-seller-main-image-area").attr("src",c).attr("data-imagePn",d.imagePn);if(nullValueCheck(a)){$("#jt-seller-main-image-area").attr("data-oldSrc",b)}setTimeout("jtown.seller.changeMainBgHeight()",100)};jtown.seller.mainImageUpdate=function(){var a=contextPath+"ajax/seller/changeMainImage.jt",b={imagePn:$("#jt-seller-main-image-area").attr("data-imagePn")};$.postJSON(a,b,function(c){return jQuery.ajax({success:function(){$("#jt-seller-main-image-area").attr("data-oldSrc","").attr("data-imagePn","")},error:function(){jtown.dialog("오류 발생!")}})})};jtown.seller.mainImageCancle=function(){var a=$("#jt-seller-main-image-area").attr("data-oldSrc");$("#jt-seller-main-image-area").attr("src",a).attr("data-oldSrc","").attr("data-imagePn","");$("#representImageForm #filedata").val("")};jtown.seller.productImage=function(c){var a=contextPath+"ajax/seller/insertProduct.jt",b={imagePn:c.imagePn,saveName:c.saveName};$.postJSON(a,b,function(e){if(e.count>29){jtown.dialog("상품은 30개 이하로 등록 가능합니다.")}var d=$("#jt-product-article-object-"+e.count);d.children("img").attr("src",contextPath+"photo/thumbnail/"+e.saveName+"product."+c.type);d.addClass("jt-product-article-object-img");d.attr("data-ppn",e.pn);jtown.seller.syncPopup()})};jtown.seller.syncEvent=function(){$("#jt-seller-expand-event-first, #jt-seller-expand-event-second").unbind("mouseover mouseout");$("#jt-seller-expand-event-first, #jt-seller-expand-event-second").bind("mouseover mouseout",function(a){if($(this).children(".jt-home-expand-shop-event-update-wrap").css("display")=="none"){if(a.type=="mouseover"){$(this).children(".jt-home-expand-shop-event-tool").show();$(this).find(".question-mark-wrap").show()}else{if(a.type=="mouseout"){$(this).children(".jt-home-expand-shop-event-tool").hide();$(this).find(".question-mark-wrap").hide()}}}});$(".jt-home-expand-shop-event-tool").unbind("click").bind("click",function(){$(this).parents(".jt-home-expand-shop-event").children(".jt-home-expand-shop-event-tool").hide();$(this).parents(".jt-home-expand-shop-event").children(".jt-home-expand-shop-event-update-wrap").show()});$(".jt-home-expand-shop-event-update-cancle").unbind("click").bind("click",function(){var c=$(this).parents(".jt-home-expand-shop-event");var b=c.find("img");var a=b.attr("data-oldSrc");b.attr("src",a).attr("data-oldSrc","").attr("data-imagePn","");c.find("input[type=file]").val("");c.children(".jt-home-expand-shop-event-update-wrap").hide()});$(".jt-home-expand-shop-event-update-done").unbind("click").bind("click",function(){var e=$(this).parents(".jt-home-expand-shop-event");var c=e.find("img"),d=c.attr("data-imagePn");if(!nullValueCheck(d)){var a=contextPath+"ajax/seller/changeEvent.jt",b={imagePn:d,pn:e.attr("data-epn"),bannerOrder:e.attr("data-bo")};$.postJSON(a,b,function(g){c.attr("data-oldSrc","").attr("data-imagePn","");e.attr("data-epn",g.pn);e.children(".jt-home-expand-shop-event-update-wrap").hide();var f='<div class="jt-home-expand-shop-event-new"><div><span class="jt-home-expand-shop-event-new-image">NEW</span></div></div>';e.prepend(f)})}else{c.attr("data-oldSrc","").attr("data-imagePn","");e.children(".jt-home-expand-shop-event-update-wrap").hide()}})};jtown.seller.firstEvent=function(d){var b=$("#jt-seller-expand-event-first-img").attr("src"),c=contextPath+"photo/thumbnail/"+d.saveName+"event."+d.type,a=$("#jt-seller-expand-event-first-img").attr("data-oldSrc");$("#jt-seller-expand-event-first-img").attr("src",c).attr("data-imagePn",d.imagePn);if(nullValueCheck(a)){$("#jt-seller-expand-event-first-img").attr("data-oldSrc",b)}};jtown.seller.secondEvent=function(d){var b=$("#jt-seller-expand-event-second-img").attr("src"),c=contextPath+"photo/thumbnail/"+d.saveName+"event."+d.type,a=$("#jt-seller-expand-event-second-img").attr("data-oldSrc");$("#jt-seller-expand-event-second-img").attr("src",c).attr("data-imagePn",d.imagePn);if(nullValueCheck(a)){$("#jt-seller-expand-event-second-img").attr("data-oldSrc",b)}};if(typeof jtown.expand=="undefined"){jtown.expand={}}jtown.expand.show=true;jtown.expand.loadExpandShop=function(){$(".jt-home-shop-content-image").unbind("click").bind("click",function(){var b=$(this).parents(".jt-seller-main");if(nullValueCheck(b.html())){var c=$(this).parents(".jt-home-shop"),a=c.attr("data-spn");jtown.expand.makeInnerHtml(a)}});$(".jt-home-shop-comment").unbind("click").bind("click",function(){var c=$(this).parents(".jt-seller-main");if(nullValueCheck(c.html())){var b=$(this).parents(".jt-home-shop"),a=b.attr("data-spn");jtown.expand.makeInnerHtml(a)}})};jtown.expand.makeInnerHtml=function(c){var a=contextPath+"ajax/home/expandShop.jt",b={pn:c};$.postJSON(a,b,function(e){var A="";var l=e.event1,k=e.event2,u=e.products,o=e.jtownUser,g=e.comments,s=e.commentTops,w=e.commentFilter,E=e.interestes,L=e.cpn,K=false,H=e.loveHave;var x=htmlChars(o.name);ga("send","pageview",{page:"/ajax/home/expandShop.jt?pn="+c,title:x});var r=Number(u.length);var q="";var C="";for(var O=0;O<r;O++){var F=u[O];var j='<span title="'+htmlChars(nullValueCheck(F.name)?"":F.name)+'">'+htmlChars(nullValueCheck(F.name)?"":F.name)+"</span>";j+="<span>"+htmlChars(nullValueCheck(F.commaPrice)?"":F.commaPrice)+"</span>";if(nullValueCheck(F.name)||nullValueCheck(F.commaPrice)){j="<span>상품 정보가 아직</span><span>입력되지 않았습니다.</span>"}var f=contextPath+"photo/thumbnail/"+F.saveName+"product."+F.imageType;if(F.imageCategory=="0"){f=contextPath+"resources/uploadImage/"+F.saveName}q+='	<li class="jt-home-expand-shop-expandProduct">';q+='		<a href="'+(nullValueCheck(F.url)?o.shopUrl:F.url)+'" target="_blank" onclick="jtown.home.clickProduct('+c+",'"+x+": "+F.name+'\');"><img alt="상품" src="'+f+'"/></a>';q+='		<div class="jt-product-article-object-wrap jt-product-article-object-expand">';q+="			"+j;q+="		</div>";q+="	</li>";var M='<span class="text">&nbsp;</span>';if(F.newProduct){M='<span class="text">New</span>'}f=contextPath+"photo/thumbnail/"+F.saveName+"productSmall."+F.imageType;if(F.imageCategory=="0"){f=contextPath+"resources/uploadImage/"+F.saveName}C+='<div class="thumbnail">';C+="	"+M;C+='	<span class="'+(O==0?(r-1):(O-1))+' image" ><img alt="Product'+O+'" src="'+f+'"/></span>';C+="</div>"}if(r<3){for(var O=r;O<3;O++){q+='	<li class="jt-home-expand-shop-expandProduct">';q+='		<a href="'+o.shopUrl+'"><img alt="Empty Product" src="'+contextPath+'resources/images/jt-product-blank.png"></a>';q+=" </li>";C+='<div class="thumbnail">';C+='	<span class="text">&nbsp;</span>';C+='	<span class="image" ><img alt="Product" src="'+contextPath+'resources/images/jt-product-thumbnail-blank.png"/></span>';C+="</div>"}}var J=contextPath+"resources/images/jt-event-user-blank.png",I=contextPath+"resources/images/jt-event-user-blank.png";if(!nullValueCheck(l)){J=contextPath+"photo/thumbnail/"+l.saveName+"event."+l.imageType;if(l.imageCategory=="0"){J=contextPath+"resources/uploadImage/"+l.saveName}}if(!nullValueCheck(k)){I=contextPath+"photo/thumbnail/"+k.saveName+"event."+k.imageType;if(k.imageCategory=="0"){I=contextPath+"resources/uploadImage/"+k.saveName}}var P="";if(s.length>0){g=s;K=true}var n='&nbsp;<a href="#none" class="jt-home-expand-shop-comment-loveIt-cancle">취소</a>';for(var O=0;O<g.length;O++){var D=g[O];var G=nullValueCheck(D.commentCustomerPn)?"":n;var N="";if(D.customerPn!=L){if(nullValueCheck(D.warnCustomerPn)){N='&nbsp;<span href="#none" class="jt-warn-active" title="신고">WARN</span>'}else{N='&nbsp;<span href="#none" class="jt-warn-disactive" title="신고">WARN</span>'}}P+='<li data-copn="'+D.commentPn+'" class="'+(K?"jt-home-expand-shop-comment-li-best":"jt-home-expand-shop-comment-li")+'">';P+='	<ul class="jt-home-expand-shop-text-wrap">';if(K){P+='		<li class="jt-home-expand-shop-comment-header">';P+='			<span class="jt-home-expand-shop-comment-best">BEST</span>';P+="		</li>"}P+='		<li class="jt-home-expand-shop-comment-content">';P+='			<span class="jt-home-expand-shop-comment-name">'+htmlChars(D.customerName)+"</span>";P+=' 			<span class="jt-home-expand-shop-comment-text">'+htmlChars(D.comment)+"</span>";P+="		</li>";P+='		<li class="copnLoveIt-'+D.commentPn+' jt-home-expand-shop-comment-footer">';P+='			<span class="jt-home-expand-shop-comment-progress-date">'+D.inputDate+"</span>";P+=' 			<a href="#none" class="jt-home-expand-shop-comment-loveIt">LOVE</a>';P+='			<span class="jt-home-expand-shop-comment-loveIt-count">'+(nullValueCheck(D.commentLoveCount)?"":D.commentLoveCount)+"</span>"+G;P+="			"+N;P+="		</li>";P+="	</ul>";if(D.customerPn==L||L=="admin"){P+='<div class="jt-home-expand-shop-update-wrap">';P+='	<input type="text" class="jt-comment-update-input" value="'+htmlChars(D.comment)+'" maxlength="100"><br/>';P+="	<span>esc를 누르시면 수정이 취소 됩니다.</span>";P+="</div>";P+='<div class="jt-home-expand-shop-tool-wrap">';P+='	<a href="#none" class="jt-comment-update jt-btn-white-small">';P+='		<span class="btnImage"></span>';P+="	</a>";P+='	<a href="#none" class="jt-comment-delete jt-btn-white-small">';P+='		<span class="btnImage"></span>';P+="	</a>";P+="</div>"}P+="</li>"}var m=w.pagination;if(s.length>0){if(m.numItems>0){P+='<li class="jt-home-expand-shop-comment-add">';P+='	<a href="#none" class="jt-btn-silver" id="comment-add-btn"';P+='		data-spn="'+o.pn+'" data-page="0" ';P+='		data-ni="'+m.numItems+'" data-nipp="'+m.numItemsPerPage+'">';P+='			댓글&nbsp;더&nbsp;보기&nbsp;<span id="comment-now-count">0</span>/'+m.numItems;P+="	</a>";P+="</li>"}}else{if(m.numItems>m.numItemsPerPage){P+='<li class="jt-home-expand-shop-comment-add">';P+='	<a href="#none" class="jt-btn-silver" id="comment-add-btn"';P+='		data-spn="'+o.pn+'" data-page="1" ';P+='		data-ni="'+m.numItems+'" data-nipp="'+m.numItemsPerPage+'">';P+='			댓글&nbsp;더&nbsp;보기&nbsp;<span id="comment-now-count">'+m.numItemsPerPage+"</span>/"+m.numItems;P+="	</a>";P+="</li>"}}var v="";if(L==0){v+='<input id="jt-comment-insert" readonly="readonly" placeholder="판매자 아이디로는 이용하실 수 없습니다."/>'}else{if(!nullValueCheck(L)){v+='<input type="text" id="jt-comment-insert" placeholder="쇼핑몰에 대한 한마디를 남겨보세요. 상품 배송문의는 해당 쇼핑몰 고객센터로 남겨주세요." maxlength="100"/>'}else{v+='<input id="jt-comment-insert" readonly="readonly" placeholder="로그인한 사용자만 사용할 수 있습니다."/>'}}var t="";t+='		<div class="jt-home-expand-shop-event-new">';t+="			<div>";t+='				<span class="jt-home-expand-shop-event-new-image">NEW</span>';t+="			</div>";t+="		</div>";var z=(!nullValueCheck(H)&&H!=0)?"jt-home-shop-love-click":"";var p=(!nullValueCheck(H)&&H!=0)?"jt-home-shop-love-text-click":"";var y='<span class="jt-home-shop-love-hot" title="최근 뜨는 미니샵">HOT</span>';if(nullValueCheck(o.loveHotCount)||o.loveHotCount==0){y=""}var B='<div style="padding-bottom: 15px; float:left; width: 100%;"></div>';if(E.length>0){B+='<div class="jt-home-expand-shop-tag">';B+='<span class="tag-txt">';for(var O=0,h=E.length;O<h;O++){var d=E[O];B+=d.name;if((O+1)!=h){B+=",&nbsp;"}}B+='</span><span class="tag-image">Tag</span>';B+="</div>"}A+='<header class="jt-home-expand-click-shop-header">';A+="	<div>";A+='		<a href="'+o.shopUrl+'" target="_blank" onclick="jtown.home.goHome(\''+c+'\');" title="클릭시 해당 쇼핑몰로 이동됩니다.">'+x+"</a>";A+="	</div>";A+="</header>";A+='<div class="jt-home-expand-shop jt-home-expand-click-shop" id="jt-home-expand-shop" data-name="'+x+'" data-size="'+r+'" data-nowPosition="'+r+'" data-spn="'+o.pn+'" data-url="'+o.shopUrl+'">';A+='	<div id="jt-home-expand-shop-notice" title="클릭시 해당 쇼핑몰로 이동됩니다.">';A+='		<span class="jt-home-expand-shop-firstQuotationMark"></span>';A+='		<pre id="jt-seller-expand-shop-text" class="jt-home-expand-shop-text">'+(nullValueCheck(o.longNotice)?"쇼핑몰의 홍보문구를 입력해주세요.":o.longNotice)+"</pre>";A+='		<span class="jt-home-expand-shop-lastQuotationMark"></span>';A+="	</div>";A+='	<div class="jt-home-expand-shop-expandProducts">';if(r>3){A+='		<button class="jt-home-expand-shop-leftArrow jt-home-expand-shop-arrow"><span>&lt;</span></button>'}else{A+='		<button class="jt-home-expand-shop-arrow"></button>'}A+='		<div class="jt-home-expand-shop-fake-dan">';A+='			<ul class="jt-home-expand-shop-expandProduct-slide">';A+="				"+q;A+="			</ul>";A+="		</div>";if(r>3){A+='		<button class="jt-home-expand-shop-rigthArrow jt-home-expand-shop-arrow"><span>&gt;</span></button>'}else{A+='		<button class="jt-home-expand-shop-arrow"></button>'}A+='		<div class="jt-home-expand-shop-products ">';A+="			"+C;A+="			"+B;A+="		</div>";A+="	</div>";A+='	<div class="jt-home-expand-shop-event" id="jt-seller-expand-event-first" title="클릭시 해당 쇼핑몰로 이동됩니다.">';A+="		"+((o.bannerFirst!=null&&Number(o.bannerFirst)<3)?t:"");A+='		<img alt="First Event" src="'+J+'"/>';A+="	</div>";A+='	<div class="jt-home-expand-shop-event" id="jt-seller-expand-event-second" title="클릭시 해당 쇼핑몰로 이동됩니다.">';A+="		"+((o.bannerSecond!=null&&Number(o.bannerSecond)<3)?t:"");A+='		<img alt="Second Event" src="'+I+'"/>';A+="	</div>";A+='	<ul class="jt-home-expand-shop-content-fn">';A+='		<li class="jt-home-expand-shop-content-view-wrap">';A+='			<span class="jt-home-expand-shop-content-view" title="최근 일주일간 방문수">Look</span>&nbsp;<span id="view-expand-'+c+'">'+o.viewCount+"</span>";A+="		</li>";A+='		<li class="jt-home-expand-shop-content-comment-wrap">';A+='			<span class="jt-home-expand-shop-content-comment"></span>&nbsp;Comment&nbsp;<span id="comment-expand-'+c+'" class="jt-home-expand-shop-content-comment-text">'+o.commentCount+"</span>";A+='			<div class="jt-home-expand-shop-border-hide"></div>';A+="		</li>";A+='		<li class="jt-home-expand-shop-content-love-wrap">';A+='			<div class="jt-heart-click-expand-wrap">';A+='				<div class="jt-heart-click-background" id="jt-heart-expand-click-'+c+'">';A+='					<img alt="heart-background" src="'+contextPath+'resources/images/heart-background.png">';A+="				</div>";A+='				<div class="jt-heart-click">';A+='					<a href="#none" onclick="jtown.home.clickLove(\''+c+'\');"><span class="jt-home-expand-shop-content-love '+z+'" id="love-expand-image-'+c+'">Love</span></a>';A+="				</div>";A+="			</div>";A+='			<div class="jt-home-expand-shop-content-love-text-wrap">';A+='				<span id="love-expand-'+c+'" class="'+p+'">'+o.loveCount+"</span>";A+="				"+y;A+="			</div>";A+="		</li>";A+="	</ul>";A+='	<div class="jt-home-expand-shop-comment-wrap">';A+='		<ul class="jt-home-expand-shop-comment">';A+="			"+P;A+="		</ul>";A+='		<div class="jt-home-expand-shop-comment-insert">';A+="			"+v;A+="		</div>";A+="	</div>";A+="</div>";$.smartPop.open({width:640,height:650,html:A,effect:"transfer",target:"#jt-home-shop-"+c});setTimeout("jtown.expand.setTimeout()",0);setTimeout("jtown.home.clickShop('"+c+"');",0)})};jtown.expand.setTimeout=function(){jtown.expand.show=true;jtown.comment.syncComment();jtown.expand.changeContainerHeight();jtown.expand.gotoPage();jtown.seller.syncProduct();$(function(){$("#jt-comment-insert").placeholder();$(".jt-home-expand-shop-expandProducts").jCarouselLite({btnNext:".jt-home-expand-shop-leftArrow",btnPrev:".jt-home-expand-shop-rigthArrow",mouseWheel:true,speed:300,btnGo:[".0",".1",".2",".3",".4",".5",".6",".7",".8",".9",".10",".11",".12",".13",".14",".15",".16",".17",".18",".19",".20",".21",".22",".23",".24",".25",".26",".27",".28",".29"],afterEnd:function(a){setTimeout("jtown.seller.syncProduct()",0)}})})};jtown.expand.gotoPage=function(){$(".jt-home-expand-click-shop").each(function(){var b=$(this);var a=b.attr("data-name");var c=function(){var f=b.attr("data-spn");var e=b.attr("data-url");var d=window.open("about:blank");d.location.href=e;jtown.home.goHome(f)};b.children("#jt-home-expand-shop-notice").unbind("click").bind("click",c);b.children(".jt-home-expand-shop-event").unbind("click").bind("click",function(){ga("send","event","event","click",a);c()})})};jtown.expand.changeContainerHeight=function(){var d=$("#smartPop_container");if(!nullValueCheck(d.html())){var c=$("#smartPop_content");var a=$("#jt-home-expand-shop").css("height");a=Number(a.replace("px",""));var b=a+50;d.css("height",b+"px");c.css("height",b+"px")}};if(typeof jtown.comment=="undefined"){jtown.comment={}}jtown.comment.syncComment=function(){var a=$.browser.chrome?"keydown":"keypress";$("#jt-comment-insert").unbind(a).bind(a,function(b){if(b.keyCode==13){jtown.comment.insertComment($(this))}});$("#jt-comment-insert").unbind("click").bind("click",function(){var f=$(this).parents("#jt-home-expand-shop"),e=f.attr("data-spn"),c=f.attr("data-name");var b=contextPath+"ajax/home/existComment.jt",d={sellerPn:e};$.postJSON(b,d,function(i){var g=i.result,h=i.authority;if(h!="CUSTOMER"){$("#jt-comment-insert").unbind("click");return}if(g){$("#jt-comment-insert").attr("readonly","readonly");jtown.dialog(c+" 쇼핑몰에 대한 댓글은<br/>하루에 한번만 가능합니다.")}else{$("#jt-comment-insert").removeAttr("readonly")}})});$(".jt-comment-delete").unbind("click").bind("click",function(){var b=$(this);jtown.confirm("댓글을 삭제하시겠습니까?",function(){jtown.comment.deleteComment(b)},function(){})});$(".jt-comment-update").unbind("click").bind("click",function(){var b=$(this).parents("li");b.find(".jt-home-expand-shop-tool-wrap").hide();b.find(".jt-home-expand-shop-text-wrap").hide();b.find(".jt-home-expand-shop-update-wrap").show();setTimeout("jtown.expand.changeContainerHeight()",0)});$(".jt-comment-update-input").unbind(a).bind(a,function(b){if(b.keyCode==13){jtown.comment.updateComment($(this))}else{if(b.keyCode==27){jtown.comment.cancleComment($(this))}}setTimeout("jtown.expand.changeContainerHeight()",0)});$(".jt-home-expand-shop-comment li").unbind("mouseover mouseout").bind("mouseover mouseout",function(b){var c=$(this).find(".jt-home-expand-shop-update-wrap").css("display");if(c!="block"){if(b.type=="mouseover"){$(this).find(".jt-home-expand-shop-tool-wrap").show()}else{if(b.type=="mouseout"){$(this).find(".jt-home-expand-shop-tool-wrap").hide()}}}});$("#comment-add-btn-best").unbind("click").bind("click",function(e){var d=$(this);var b=contextPath+"ajax/home/selectCommentBest.jt";var c={sellerPn:d.attr("data-spn")};$.postJSON(b,c,function(h){for(var g=0,f=h.length;g<f;g++){var j=h[g];jtown.comment.commentHtml(j,"last",true)}setTimeout("jtown.comment.syncComment()",0);$("#comment-add-btn-best").parents("li").remove();$("#comment-add-btn").parents("li").show()})});$("#comment-add-btn").unbind("click").bind("click",function(g){var f=$(this),h=(Number(f.attr("data-page"))+1),b=(h+1),i=f.attr("data-nipp"),e=f.attr("data-ni");var c=contextPath+"ajax/home/selectComment.jt";var d={page:h,sellerPn:f.attr("data-spn")};$.postJSON(c,d,function(l){for(var k=0,j=l.length;k<j;k++){var m=l[k];jtown.comment.commentHtml(m,"last",false)}setTimeout("jtown.expand.changeContainerHeight()",0);setTimeout("jtown.comment.syncComment()",0);if(b*i<e||(h*i<e&&b*i>=e)){f.attr("data-page",h);$("#comment-now-count").html(h*i)}else{f.parents("li").remove()}})});$(".jt-home-expand-shop-comment-loveIt").unbind("click").bind("click",function(){var f=$(this),c=f.parents(".jt-home-expand-shop-comment-li"),e=f.parents("#jt-home-expand-shop");if(nullValueCheck(c.html())){c=f.parents(".jt-home-expand-shop-comment-li-best")}var g=c.attr("data-copn");var b=contextPath+"ajax/home/toggleCommentLove.jt";var d={commentPn:g,sellerPn:e.attr("data-spn")};$.postJSON(b,d,function(i){if(!nullValueCheck(i.message)){switch(Number(i.message)){case 1:jtown.login.showLoginForm();break;case 2:jtown.dialog("판매자는 불가능 합니다.");break;default:break}}else{var h=i.crudType;if(h=="insert"){$(".copnLoveIt-"+g+" .jt-home-expand-shop-comment-loveIt-count").after('<a href="#none" class="jt-home-expand-shop-comment-loveIt-cancle">&nbsp;취소</a>');jtown.comment.loveCancle()}else{if(h=="delete"){$(".copnLoveIt-"+g).find(".jt-home-expand-shop-comment-loveIt-cancle").remove()}}}})});jtown.comment.loveCancle();$(".jt-warn-active").unbind("click").bind("click",function(){var e=$(this),c=e.parents(".jt-home-expand-shop-comment-li");if(nullValueCheck(c.html())){c=e.parents(".jt-home-expand-shop-comment-li-best")}var f=c.attr("data-copn");var b=contextPath+"ajax/home/warnCommentLove.jt";var d={commentPn:f};$.postJSON(b,d,function(g){if(!nullValueCheck(g.message)){jtown.dialog(g.message)}else{e.removeClass("jt-warn-active").addClass("jt-warn-disactive").unbind("click")}})})};jtown.comment.home=function(){$(".jt-home-shop-comments").unbind("mouseover").bind("mouseover",function(){var a=$(this),c=a.parents(".jt-home-shop-comments-wrap"),d=a.attr("data-copn"),b=a.attr("data-isSplit");a.unbind("mouseover");if(b=="true"){$.postJSON(contextPath+"ajax/home/selectCommentOne.jt",{commentPn:d},function(f){var e='<div class="jt-more-comment-wrap">'+f.comment+"</div>";a.after(e);c.find(".jt-more-comment-wrap").slideDown();a.unbind("mouseover").bind("mouseover",function(){var g=$(this).parents(".jt-home-shop-comments-wrap").find(".jt-more-comment-wrap");g.slideDown()});$(".jt-more-comment-wrap").unbind("mouseout").bind("mouseout",function(){$(".jt-more-comment-wrap").slideUp()})})}})};jtown.comment.syncHeight=function(c,a){var b=$("#home-commentPn-"+c).parents(".jt-home-shop");b.find(".jt-home-shop-comments-bar").height((Number(a)+20));b.find(".jt-home-shop-comments-bar").find("div").height(a)};jtown.comment.loveCancle=function(){$(".jt-home-expand-shop-comment-loveIt-cancle").unbind("click").bind("click",function(){var d=$(this),b=d.parents(".jt-home-expand-shop-comment-li"),f=d.parents("#jt-home-expand-shop");if(nullValueCheck(b.html())){b=d.parents(".jt-home-expand-shop-comment-li-best")}var e=b.attr("data-copn");var a=contextPath+"ajax/home/toggleCommentLove.jt";var c={commentPn:e,sellerPn:f.attr("data-spn")};$.postJSON(a,c,function(h){if(!nullValueCheck(h.message)){jtown.login.showLoginForm()}else{var g=h.crudType;if(g=="delete"){$(".copnLoveIt-"+e).find(".jt-home-expand-shop-comment-loveIt-cancle").remove()}}})})};jtown.comment.commentHtml=function(f,e,c){var j=$("#jt-logout").attr("data-cpn");var h='&nbsp;<a href="#none" class="jt-home-expand-shop-comment-loveIt-cancle">취소</a>';var b=nullValueCheck(f.commentCustomerPn)?"":h;var g="";if(f.customerPn!=j){if(nullValueCheck(f.warnCustomerPn)){g='&nbsp;<span href="#none" class="jt-warn-active" title="신고">WARN</span>'}else{g='&nbsp;<span href="#none" class="jt-warn-disactive" title="신고">WARN</span>'}}var d="";d+='<li data-copn="'+f.commentPn+'" class="'+(c?"jt-home-expand-shop-comment-li-best":"jt-home-expand-shop-comment-li")+'">';d+='	<ul class="jt-home-expand-shop-text-wrap">';if(c){d+='		<li class="jt-home-expand-shop-comment-header">';d+='			<span class="jt-home-expand-shop-comment-best">BEST</span>';d+="		</li>"}d+='		<li class="jt-home-expand-shop-comment-content">';d+='			<span class="jt-home-expand-shop-comment-name">'+htmlChars(f.customerName)+"</span>";d+=' 			<span class="jt-home-expand-shop-comment-text">'+htmlChars(f.comment)+"</span>";d+="		</li>";d+='		<li class="copnLoveIt-'+f.commentPn+' jt-home-expand-shop-comment-footer">';d+='			<span class="jt-home-expand-shop-comment-progress-date">'+f.inputDate+"</span>";d+=' 			<a href="#none" class="jt-home-expand-shop-comment-loveIt">LOVE</a>';d+='			<span class="jt-home-expand-shop-comment-loveIt-count">'+(nullValueCheck(f.commentLoveCount)?"":f.commentLoveCount)+"</span>"+b;d+="			"+g;d+="		</li>";d+="	</ul>";if(f.customerPn==j){d+='	<div class="jt-home-expand-shop-update-wrap">';d+='		<input type="text" class="jt-comment-update-input" value="'+htmlChars(f.comment)+'" maxlength="100"/><br/>';d+="		<span>esc를 누르시면 수정이 취소 됩니다.</span>";d+="	</div>";d+='	<div class="jt-home-expand-shop-tool-wrap">';d+='		<a href="#none" class="jt-comment-update jt-btn-white-small">';d+='			<span class="btnImage"></span>';d+="		</a>";d+='		<a href="#none" class="jt-comment-delete jt-btn-white-small">';d+='			<span class="btnImage"></span>';d+="		</a>";d+="	</div>"}d+="</li>";var a=$(".jt-home-expand-shop-comment-li:"+e).html();if(!nullValueCheck(a)){if(e=="last"){$(".jt-home-expand-shop-comment-li:"+e).after(d)}else{if(e=="first"){$(".jt-home-expand-shop-comment-li:"+e).before(d)}}}else{var i=$(".jt-home-expand-shop-comment-li-best:last").html();if(!nullValueCheck(i)){$(".jt-home-expand-shop-comment-li-best:last").after(d)}else{$(".jt-home-expand-shop-comment").prepend(d)}}};jtown.comment.insertComment=function(e){var f=e.parents("#jt-home-expand-shop"),d=f.attr("data-spn"),b=f.attr("data-name"),g=e.val();if(nullValueCheck(g)){return}var a,c={sellerPn:d};a=contextPath+"ajax/home/existLove.jt";$.postJSON(a,c,function(h){postComment=function(){a=contextPath+"ajax/home/insertComment.jt";c.comment=g;$.postJSON(a,c,function(i){e.val("");e.attr("readonly","readonly")})};if(!h){jtown.comment.loveconfirm(function(){jtown.home.clickLove(d);setTimeout("postComment()",0)},function(){postComment()},b)}else{postComment()}})};jtown.comment.loveconfirm=function(d,c,a){var b="<div></div>";$(b).dialog({resizable:false,width:"270px",modal:true,buttons:{Love:function(){d();$(this).dialog("close")},Skip:function(){c();$(this).dialog("close")}}});$(".ui-dialog-titlebar").remove();$(".ui-widget-overlay").css("opacity",".9");$(".ui-dialog").removeClass("ui-widget-content").addClass("jt-love-dialog");$(".ui-dialog-content").removeClass("ui-widget-content").addClass("jt-love-dialog-content");$(".ui-dialog-content").after('<div class="jt-love-dialog-ment">댓글 입력이 완료되었습니다.<br/>쇼핑몰&nbsp;'+a+"을 추천하시겠어요?</div>");$(".ui-dialog-buttonpane").removeClass("ui-widget-content").addClass("jt-love-dialog-buttonpane");$(".ui-dialog-buttonset").addClass("jt-love-dialog-buttonset");$(".ui-button").removeClass().addClass("jt-love-dialog-button")};jtown.comment.deleteComment=function(f){var d=f.parents("#jt-home-expand-shop"),e=d.attr("data-spn");var a=f.parents("li");var g=a.attr("data-copn");var b=contextPath+"ajax/home/deleteComment.jt",c={commentPn:g,sellerPn:e};$.postJSON(b,c,function(){})};jtown.comment.updateComment=function(d){var a=d.parents("li");var e=a.attr("data-copn"),f=d.val();var b=contextPath+"ajax/home/updateComment.jt",c={commentPn:e,comment:f};$.postJSON(b,c,function(g){a.find(".jt-home-expand-shop-text-wrap").show();a.find(".jt-home-expand-shop-update-wrap").hide()})};jtown.comment.cancleComment=function(b){var a=b.parents("li");a.find(".jt-home-expand-shop-text-wrap").show();a.find(".jt-home-expand-shop-update-wrap").hide();var c=a.find(".jt-home-expand-shop-comment-text").html();a.find(".jt-comment-update-input").val(c)};if(typeof jtown.board=="undefined"){jtown.board={}}jtown.board.noticeWrite=function(){$("#jt-admin-noticeWrite-btn").unbind("click").bind("click",function(){var a=document.forms.board;a._method.value="post";oEditors[0].exec("UPDATE_CONTENTS_FIELD",[]);a.submit()});$("#jt-admin-noticeUpdate-btn").unbind("click").bind("click",function(){var a=document.forms.board;a._method.value="put";oEditors[0].exec("UPDATE_CONTENTS_FIELD",[]);a.submit()})};if(typeof jtown.help=="undefined"){jtown.help={}}jtown.help.questionSync=function(){$(".jt-cQuestion-btn").bind("click",function(){$("#loading-popup").fadeIn();var a=document.forms.cQuestion;BrowserDetect.init();a.browser.value=BrowserDetect.browser+"-"+BrowserDetect.version+" [ "+BrowserDetect.OS+" ] ";a.submit()});$(".jt-sQuestion-btn").bind("click",function(){$("#loading-popup").fadeIn();var a=document.forms.sQuestion;BrowserDetect.init();a.browser.value=BrowserDetect.browser+"-"+BrowserDetect.version+" [ "+BrowserDetect.OS+" ] ";a.submit()});if(realPath==contextPath+"help/sQuestion.jt"){setTimeout("$('html, body').animate({scrollTop: '680px'}, 'slow')",0)}else{if(realPath==contextPath+"help/cQuestion.jt"){setTimeout("$('html, body').animate({scrollTop: '100px'}, 'slow')",0)}else{if(realPath==contextPath+"login/disactive.jt"){setTimeout("$('html, body').animate({scrollTop: $(document).height()}, 'slow')",0)}}}};